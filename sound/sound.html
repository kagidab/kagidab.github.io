<html>
<head>

<script src="http://unpkg.com/tone"></script>

</head>

<body>
<tone-example label="Microphone">
		<div slot="explanation">
			If supported, Tone.UserMedia uses <code>getUserMedia</code> to open the user's microphone where it can then be processed with Tone.js. Only works on https domains.
		</div>

		<div id="content">
			<tone-mic-button></tone-mic-button>
		</div>
	</tone-example>
	
	<script type="text/javascript">
		// you probably DONT want to connect the microphone
		// directly to the master output because of feedback.
		const mic = new Tone.UserMedia();

		const micFFT = new Tone.FFT();
		mic.connect(micFFT);

		//fft({
		//	tone: micFFT,
		//	parent: document.querySelector("#content")
		//});

		// bind the interface
		const micButton = document.querySelector("tone-mic-button");
		micButton.supported = Tone.UserMedia.supported;
		micButton.addEventListener("open", () => mic.open());
		micButton.addEventListener("close", () => mic.close());

	</script>

</body>
